namespace SpriteKind {
    export const bonus = SpriteKind.create()
    export const gun = SpriteKind.create()
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (loded > 0) {
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . 4 4 4 5 5 4 4 4 . . . . 
            . . . 3 3 3 3 4 4 4 4 4 4 . . . 
            . . 4 3 3 3 3 2 2 2 1 1 4 4 . . 
            . . 3 3 3 3 3 2 2 2 1 1 5 4 . . 
            . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 . 
            . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 . 
            . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . . 4 2 3 3 2 4 4 4 4 4 2 4 . . 
            . . 4 2 2 3 2 2 4 4 4 2 4 4 . . 
            . . . 4 2 2 2 2 2 2 2 2 4 . . . 
            . . . . 4 4 2 2 2 2 4 4 . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, motherbib, 100, 0)
        loded = -1
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.gun, function (sprite, otherSprite) {
    fireball.destroy(effects.coolRadial, 500)
    loded = 5
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.bonus, function (sprite, otherSprite) {
    chest.setImage(img`
        . b b b b b b b b b b b b b b . 
        b e 4 4 4 4 4 4 4 4 4 4 4 4 4 b 
        b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
        b e e 4 4 4 4 4 4 4 4 4 4 e e b 
        b b b b b b b d d b b b b b b b 
        . b b b b b b c c b b b b b b . 
        b c c c c c b c c b c c c c c b 
        b c c c c c c b b c c c c c c b 
        b c c c c c c c c c c c c c c b 
        b c c c c c c c c c c c c c c b 
        b b b b b b b b b b b b b b b b 
        b e e e e e e e e e e e e e e b 
        b e e e e e e e e e e e e e e b 
        b c e e e e e e e e e e e e c b 
        b b b b b b b b b b b b b b b b 
        . b b . . . . . . . . . . b b . 
        `)
    pause(1000)
    otherSprite.destroy(effects.fountain, 100)
    for (let value of wall) {
        tiles.setTileAt(value, myTiles.transparency16)
        tiles.setWallAt(value, false)
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (motherbib.vy == 0) {
        motherbib.vy = -150
    }
})
scene.onOverlapTile(SpriteKind.Player, sprites.castle.rock0, function (sprite, location) {
    level += 2
    make_tilemap(level)
    tiles.placeOnRandomTile(motherbib, myTiles.tile1)
})
function make_tilemap (levels: number) {
    if (levels == 1) {
        loded = 5
        tiles.setTilemap(tiles.createTilemap(hex`6400100000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000006060606060600000000000000060606060606060606060606060606060600000000000606060606060606060606060606060606060606060606060606060600000000000000000000000000000000000001010000000000000000000000000005000600000606060606060606060600000000000606060606040406040606060606060606060606060606060106060606060606060606060606060606060606060606060600000000000000000000000000000000000101000000000000000000000000050006060600000000000000000000060606060606060000060606060604060606060606060606060606060106010606010106060606060606060606060606060606060606000000000000000000000000000000000000010101000000000000000000000506060606060606060606060606060606060606060604040606060606060606060101010106060606060601060101010101060606060606060606060606060606060606060000000000000000000000000000000000000000010101000000000000000005060606060606060606060606060606060606060606060606060606000006010101010601010106060601060606010101010101010106060606060606060606060606060600000000000000000000000000000000000000000000010100010001000000040101010606060601010106060606010606010601010000000000000000000101060606060601010101010606060101060601010101060606060606060606060606060606000000000000000000000000000000000000000000000000000100010000000106060601010606010601060606060601010606060606060606060606060606060606060606060606060606060606060606010106010101060606060606060606060606060700000000000000000000000001010000010100000101000101060101010106060606060601010106010101010101000606060606060606060606060606060606060606060606060606060606060606010106060606060606060606060601010101060601010101010200000000000301010606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060101010106060606060606060106060101010601010101060606060601010101010101060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060601010606060606060606060601010101060606060101060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606010101010101010101060601010101060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060101010101010101010601010606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060601010101010101010101010606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060601010101010106060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606`, img`
            ...............................2....................................................................
            ...............................2....................................................................
            ................22.............2........................22.2...............2........................
            .................22............2............................2.............2.2..22...................
            ..................222..........2.....................222.........222......2.22.22...................
            ....................222........2..............................2222.222...2...22222..................
            ......................22.2.2...2222....222....2..2222.........2......22222...22..2.22...............
            .........................2.2...2...22..2.2.....22................................2..222.............
            .............22..22..22.22.2222......222.222222................................222...........2222...
            22222.......22...............................................................22..........2.222..2222
            .....2222222.................................................................22..........222........
            .............................................................................222222222..222.........
            .............................................................................222222222222...........
            .............................................................................22.2222222.............
            ..............................................................................2222222...............
            ..................................................................................22................
            `, [myTiles.transparency16,sprites.builtin.oceanDepths0,sprites.builtin.coral1,sprites.builtin.coral4,sprites.builtin.oceanDepths1,sprites.builtin.forestTiles0,sprites.dungeon.hazardLava1,myTiles.tile1], TileScale.Sixteen))
        tiles.placeOnRandomTile(motherbib, myTiles.tile1)
    } else {
        tiles.setTilemap(tiles.createTilemap(hex`6400100001010101010101000000000101000001010100010100010101000101000101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000010001010000010101000100000101010001000001010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010100000100010100000101010000000101010100000001010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000101000001010100010101010101000001010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000010001010000010101000101010101010000000101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010100000100010100000101010001010101010100010000010101010101010101010101010202010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000101000001010100010101010101000101000101010101010101010102000002010202020101010102020201010101010101010101010101010301010101010101010101040101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000101010101020202020101010101010202020202020102020202020101010202020202020102020202020202020202020201010101010202020202020202010101010101010202020202020101010101010101010101020202020202020200000000000000020202020201010101010101010101010101010101010101010202020202010101010202020101010101010101010102020200000002010101010101020202020202020101010101010202020202020202020202020201010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101`, img`
            ....................................................................................................
            ....................................................................................................
            ....................................................................................................
            ....................................................................................................
            ....................................................................................................
            ..........................................22........................................................
            .......................................2..2.222....222..............................................
            ....................................2222......222222.22222...222222.222222222222.....22222222.......
            222222...........22222222.......22222....................22222....222..........222...2......2222222.
            .....2222222222222..................................................................................
            ....................................................................................................
            ....................................................................................................
            ....................................................................................................
            ....................................................................................................
            ....................................................................................................
            ....................................................................................................
            `, [myTiles.transparency16,myTiles.tile3,sprites.builtin.oceanDepths0,sprites.builtin.coral0,sprites.builtin.coral1], TileScale.Sixteen))
        shark = sprites.create(img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ..........ffff..........
            ........ff1111ff........
            .......fb111111bf.......
            .......f11111111f.......
            ......fd11111111df......
            ....7.fd11111111df......
            ...7..fd11111111df......
            ...7..fd11111111df......
            ...7..fddd1111dddff.....
            ...77.fbdbfddfbdbfcf....
            ...777fcdcf11fcdcfbf....
            ....77fffbdb1bdffcf.....
            ....fcb1bcffffff........
            ....f1c1c1ffffff........
            ....fdfdfdfffff.........
            .....f.f.f..............
            ........................
            ........................
            ........................
            `, SpriteKind.Enemy)
        shark.x += 14
        tiles.placeOnRandomTile(shark, sprites.builtin.coral1)
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (sprite.y < otherSprite.top) {
        otherSprite.destroy(effects.fire, 100)
        chest = sprites.create(img`
            . . b b b b b b b b b b b b . . 
            . b e 4 4 4 4 4 4 4 4 4 4 e b . 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e e 4 4 4 4 4 4 4 4 4 4 e e b 
            b e e e e e e e e e e e e e e b 
            b e e e e e e e e e e e e e e b 
            b b b b b b b d d b b b b b b b 
            c b b b b b b c c b b b b b b c 
            c c c c c c b c c b c c c c c c 
            b e e e e e c b b c e e e e e b 
            b e e e e e e e e e e e e e e b 
            b c e e e e e e e e e e e e c b 
            b b b b b b b b b b b b b b b b 
            . b b . . . . . . . . . . b b . 
            `, SpriteKind.bonus)
        tiles.placeOnTile(chest, tiles.getTileLocation(16, 1))
        fireball = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . 4 4 4 5 5 4 4 4 . . . . 
            . . . 3 3 3 3 4 4 4 4 4 4 . . . 
            . . 4 3 3 3 3 2 2 2 1 1 4 4 . . 
            . . 3 3 3 3 3 2 2 2 1 1 5 4 . . 
            . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 . 
            . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 . 
            . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . . 4 2 3 3 2 4 4 4 4 4 2 4 . . 
            . . 4 2 2 3 2 2 4 4 4 2 4 4 . . 
            . . . 4 2 2 2 2 2 2 2 2 4 . . . 
            . . . . 4 4 2 2 2 2 4 4 . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.gun)
        tiles.placeOnTile(fireball, tiles.getTileLocation(32, 5))
    } else {
        game.over(false, effects.melt)
    }
})
let chest: Sprite = null
let fireball: Sprite = null
let projectile: Sprite = null
let loded = 0
let shark: Sprite = null
let motherbib: Sprite = null
let wall: tiles.Location[] = []
let level = 0
level = 1
make_tilemap(level)
tiles.setTilemap(tiles.createTilemap(hex`6400100000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000006060606060600000000000000060606060606060606060606060606060600000000000606060606060606060606060606060606060606060606060606060600000000000000000000000000000000000001010000000000000000000000000005000600000606060606060606060600000000000606060606040406040606060606060606060606060606060106060606060606060606060606060606060606060606060600000000000000000000000000000000000101000000000000000000000000050006060600000000000000000000060606060606060000060606060604060606060606060606060606060106010606010106060606060606060606060606060606060606000000000000000000000000000000000000010101000000000000000000000506060606060606060606060606060606060606060604040606060606060606060101010106060606060601060101010101060606060606060606060606060606060606060000000000000000000000000000000000000000010101000000000000000005060606060606060606060606060606060606060606060606060606000006010101010601010106060601060606010101010101010106060606060606060606060606060600000000000000000000000000000000000000000000010100010001000000040101010606060601010106060606010606010601010000000000000000000101060606060601010101010606060101060601010101060606060606060606060606060606000000000000000000000000000000000000000000000000000100010000000106060601010606010601060606060601010606060606060606060606060606060606060606060606060606060606060606010106010101060606060606060606060606060700000000000000000000000001010000010100000101000101060101010106060606060601010106010101010101000606060606060606060606060606060606060606060606060606060606060606010106060606060606060606060601010108060601010101010200000000000301010606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060101010106060606060606060106060101010601010101060606060601010101010101060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060601010606060606060606060601010101060606060101060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606010101010101010101060601010101060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060101010101010101010601010606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060601010101010101010101010606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060601010101010106060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606060606`, img`
    ...............................2....................................................................
    ...............................2....................................................................
    ................22.............2........................22.2...............2........................
    .................22............2............................2.............2.2..22...................
    ..................222..........2.....................222.........222......2.22.22...................
    ....................222........2..............................2222.222...2...22222..................
    ......................22.2.2...2222....222....2..2222.........2......22222...22..2.22...............
    .........................2.2...2...22..2.2.....22................................2..222.............
    .............22..22..22.22.2222......222.222222................................222...........2222...
    22222.......22...............................................................22..........2.222..2222
    .....2222222.................................................................22..........222........
    .............................................................................222222222..222.........
    .............................................................................222222222222...........
    .............................................................................22.2222222.............
    ..............................................................................2222222...............
    ..................................................................................22................
    `, [myTiles.transparency16,sprites.builtin.oceanDepths0,sprites.builtin.coral1,sprites.builtin.coral4,sprites.builtin.oceanDepths1,sprites.builtin.forestTiles0,sprites.dungeon.hazardLava1,myTiles.tile1,sprites.castle.rock0], TileScale.Sixteen))
wall = tiles.getTilesByType(sprites.builtin.forestTiles0)
motherbib = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . f f f f f f . . . . . 
    . . . f f e e e e f 2 f . . . . 
    . . f f e e e e f 2 2 2 f . . . 
    . . f e e e f f e e e e f . . . 
    . . f f f f e e 2 2 2 2 e f . . 
    . . f e 2 2 2 f f f f e 2 f . . 
    . f f f f f f f e e e f f f . . 
    . f f e 4 4 e b f 4 4 e e f . . 
    . f e e 4 d 4 1 f d d e f f . . 
    . . f e e e 4 d d d d f d d f . 
    . . . . f e e 4 e e e f b b f . 
    . . . . f 2 2 2 4 d d e b b f . 
    . . . f f 4 4 4 e d d e b f . . 
    . . . f f f f f f e e f f . . . 
    . . . . f f . . . f f f . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(motherbib, myTiles.tile1)
controller.moveSprite(motherbib, 100, 0)
motherbib.ay = 300
scene.cameraFollowSprite(motherbib)
shark = sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ........................
    ..........ffff..........
    ........ff1111ff........
    .......fb111111bf.......
    .......f11111111f.......
    ......fd11111111df......
    ....7.fd11111111df......
    ...7..fd11111111df......
    ...7..fd11111111df......
    ...7..fddd1111dddff.....
    ...77.fbdbfddfbdbfcf....
    ...777fcdcf11fcdcfbf....
    ....77fffbdb1bdffcf.....
    ....fcb1bcffffff........
    ....f1c1c1ffffff........
    ....fdfdfdfffff.........
    .....f.f.f..............
    ........................
    ........................
    ........................
    `, SpriteKind.Enemy)
tiles.placeOnRandomTile(shark, sprites.builtin.coral1)
shark.x += 14
loded = 0
game.onUpdate(function () {
    if (motherbib.y > 200) {
        game.over(false, effects.clouds)
    }
    if (shark.tileKindAt(TileDirection.Left, sprites.builtin.coral1)) {
        shark.vx = 50
        shark.setImage(img`
            ........................
            ........................
            ........................
            ..........ffff..........
            ........ff1111ff........
            .......fb111111bf.......
            ......fbd1111111f.......
            ......fdd1111111df......
            ......fddd111111df......
            ......fdddddd111df......
            ......fdddddd111df......
            ......fbddddddd1df......
            ......ffbbddbfd1df......
            .......fcbbdcfddbf......
            .......fffbddccffff.....
            .......ffffcfbbb1bcf....
            ......ffffffffcd1b1f....
            ...ffffffffff..fdfdf....
            .....ffffff.....f.f.....
            ........................
            ........................
            ........................
            ........................
            ........................
            `)
    } else if (shark.tileKindAt(TileDirection.Right, sprites.builtin.coral4)) {
        shark.vx = -50
        shark.setImage(img`
            ........................
            ........................
            ........................
            ........................
            .........fffff..........
            ........f11111ff........
            .......fb111111bf.......
            .......f1111111dbf......
            ......fd111111dddf......
            ......fd11111ddddf......
            ......fd11dddddddf......
            ......f111dddddddf......
            ......f11fcddddddf......
            .....fb1111bdddbf.......
            .....f1b1bdfcfff........
            .....fbfbffffffff.......
            ......fffffffffff.ff....
            ...........ffffffff.....
            ........f1b1bffffff.....
            ........fbfbffffff......
            ........................
            ........................
            ........................
            ........................
            `)
    }
    if (controller.left.isPressed()) {
        motherbib.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . f f f f f f . . . . . . 
            . . . f 2 f e e e e f f . . . . 
            . . f 2 2 2 f e e e e f f . . . 
            . . f e e e e f f e e e f . . . 
            . f e 2 2 2 2 e e f f f f . . . 
            . f 2 e f f f f 2 2 2 e f . . . 
            . f f f e e e f f f f f f f . . 
            . f e e 4 4 f b e 4 4 e f f . . 
            . . f e d d f 1 4 d 4 e e f . . 
            . . . f d d d d 4 e e e f . . . 
            . . . f e 4 4 4 e d d 4 . . . . 
            . . . f 2 2 2 2 e d d e . . . . 
            . . f f 5 5 4 4 f e e f . . . . 
            . . f f f f f f f f f f . . . . 
            . . . f f f . . . f f . . . . . 
            `)
    } else if (controller.right.isPressed()) {
        motherbib.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . f f f f f f . . . . . 
            . . . f f e e e e f 2 f . . . . 
            . . f f e e e e f 2 2 2 f . . . 
            . . f e e e f f e e e e f . . . 
            . . f f f f e e 2 2 2 2 e f . . 
            . . f e 2 2 2 f f f f e 2 f . . 
            . f f f f f f f e e e f f f . . 
            . f f e 4 4 e b f 4 4 e e f . . 
            . f e e 4 d 4 1 f d d e f . . . 
            . . f e e e e e d d d f . . . . 
            . . . . f 4 d d e 4 e f . . . . 
            . . . . f e d d e 2 2 f . . . . 
            . . . f f f e e f 5 5 f f . . . 
            . . . f f f f f f f f f f . . . 
            . . . . f f . . . f f f . . . . 
            `)
    }
    if (controller.down.isPressed()) {
        motherbib.setImage(img`
            ........................
            ........................
            .......ff...............
            .....ff22ff.............
            ...fff2222fff...........
            ..fff222222fff..........
            ..fff222222fff..........
            ..feeeeeeeeeeff.........
            .ffe22222222eff.........
            .fffffeeeefffff.........
            fdfefbf44fbfeff.........
            fbfe41fddf14ef..........
            fbffe4dddd4efe..........
            fcfef22222f4e...........
            .ff4f44554f4e...........
            ....ffffffdde...........
            .....ffffedde...........
            ..........ee............
            .........ccc............
            ........cc1cc...........
            .........c1c............
            .........c1c............
            .........c1c............
            .........c1c............
            `)
    } else if (controller.up.isPressed()) {
        motherbib.setImage(img`
            ..............ffffff....
            .............f2feeeeff..
            ............f222feeeeff.
            .......cc...feeeeffeeef.
            .......cdc.fe2222eeffff.
            .......cddcf2effff222ef.
            ........cddcffeeefffffff
            .........cddce44fbe44eff
            ..........cdceddf14d4eef
            ..........cccdeddd4eeef.
            ...........edd4e44eeff..
            ............ee442222f...
            .............f2e2222f...
            .............f554444f...
            ..............ffffff....
            ................fff.....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `)
    }
    if (loded > 1) {
        motherbib.say(loded, 500)
    } else {
        motherbib.say("")
    }
})
